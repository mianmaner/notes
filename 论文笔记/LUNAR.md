### 挑战

① 收集标记数据人工成本高
② 新的日志可能频繁出现，需要人工动态注释

### 简介

实验分析了基于语义的 LLM 解析器对标记数据的依赖性较高，第一个提出基于 LLM 的无监督解析器

### 框架

![image-20240901162828518](https://gitee.com/mianmann/drawing-bed-warehouse/raw/master/img/image-20240901162828518.png)

#### 分层日志碎片器

其实就是基于长度和前 k 个高频 token 来做的层次聚类（Drain）

#### 两阶段 LCU 选择器

从每个桶中先选一个候选日志，然后用 Jaccard 相似度来选择其他日志组成一个 LCU，枚举多次

计算变异性得分和共异性得分，前者越高对比信息越多，后者越高越有可能是同一模版，然后加权求和作为选择 LCU 的得分

#### 提示工程

![image-20240901165235487](https://gitee.com/mianmann/drawing-bed-warehouse/raw/master/img/image-20240901165235487.png)

可以借鉴一下

#### 桶更新

获得有效模版后，这些成功匹配的日志变回从存储桶中删除，一旦所有桶都为空，解析就会终止

### 总结

个人感觉这篇工作华而不实，无监督的想法的确很好，但 LLM 在这里的作用有待商榷。相当于用 Drain 把一类日志找出来再用 LLM 区分一下
