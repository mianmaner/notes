### 挑战

① 日志记录语句的静态范围有限，超出方法范围的日志记录变量几乎是不可能的
② 日志记录样式不一致，学习特定的日志风格具有挑战性
③ 缺少日志变量的类型信息，例如它们的属性和成员函数

### 框架

#### 静态范围扩展

目的是提取与目标方法周围的日志记录相关的静态上下文。最终，此阶段将生成三种类型的上下文：代码切片、日志切片和可用变量列表。

① 代码切片生成：代码切片过程识别调用目标方法或在两跳内被目标方法调用的方法。（这里，单次调用可以被视为一跳。如果两跳内的路径太多，我们只随机选择这些调用路径之一）

② 日志切片生成：的目的是基于指示日志依赖关系的日志图来识别给定目标方法的前日志和后日志

③ 范围变量分析：给定方法的可访问日志变量的范围不限于其参数和局部变量。它还包含超出类级别的变量，包括从父类继承的变量。所有这些变量都需要包含在上下文中以供选择作为潜在的日志记录变量，并随后形成可用变量列表

#### 日志风格适应

采用情境学习（ICL）策略，允许模型学习并适应项目的具体示例，确保生成的日志语句符合项目现有的风格。从训练集中选择 BM25 相似度得分最高的前 5 个示例

#### 上下文提示构建 

将前两个阶段从静态分析中收集的所有上下文信息转换为思想链（COT）提示

#### 记录变量细化

在为模型提供带有可用变量列表的上下文提示后，我们让模型进行推理。然后，我们提取模型选择的日志变量，并对该变量进行彻底的类型分析，以生成从项目中提取的详细类型信息，然后将其反馈给模型进行重新考虑和自我完善

为了获取所选日志变量的详细类型信息，我们通过类定义解析进行了静态分析（便利代码和项目包，递归重复）

### 总结

这个工作总体来说很复杂，工作量也很大，但的确很 solid。最大的贡献就在于真正解决了 Logging 中的变量静态范围的问题和变量的类型信息